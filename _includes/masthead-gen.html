{% for entry in site.data.navigation %}
{% capture curr_url %}{{ entry.href }}{% endcapture %}
{% if curr_url == page.url %}
{% assign current_page = curr_url %}
{% break %}
{% elsif page.href contains curr_url %}
{% assign current_page = curr_url %}
{% endif %}
{% endfor %}

<header id="header">
    <div class="masthead__logos">
        {% unless site.uob_logo_url == empty %}
        <div id="4m-logo">
            <a href="{{ site.4m_logo_url }}"><img src="{{ site.4m_logo_path }}" alt="{{ 4m_logo_alt }}"></a>
        </div>
        {% endunless %}
        <div id="title">
            {% unless site.site_title_url == empty %}
            <h1><a href="{{ site.site_title_url }}">{{ site.site_title }}</a></h1>
            {% else %}
            <h1>{{ site.site_title }}</h1>
            {% endunless %}
        </div>
    </div>

    <div class="masthead__menu">
        <nav id="links_menu">
            <a id="resp-menu" class="responsive-menu" href="#"><i class="fa fa-reorder"></i> Menu</a>
            <ul class="menu">

<script>
  (async () => {
    const response = await fetch('https://api.github.com/repositories/304575824/contents/about/');
    const data = await response.json();
    let htmlString = '
                <li {{ current }}>
                <a href="{{ category.href }}" {% if category.description %}title="{{ category.description }}"{% endif %}>{{ category.title }}</a>
                {% if category.subcategories %}

    ';
    for (let file of data) {
      let filepath = ${file.path}.slice(0, -3) + '.html'
      htmlString += `<li><a href="/4m-association/${filepath}">${file.name}</a></li>`;
    }
    htmlString += '';
    document.getElementsByClassName('menu')[0].innerHTML = htmlString;
  })()
</script>